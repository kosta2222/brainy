"use strict";!function(){function n(n){I.inited||(a(),S={adBlockMode:n.adBlockMode||"iframe",dynamicUrlTemplate:n.dynamicUrlTemplate||null,wrapperConfig:n.wrapperConfig||{},isLanguageSpecific:n.isLanguageSpecific||!1,lazyLoading:n.lazyLoading||{}},S.isLanguageSpecific&&(S.language=o()),c("Rom Init",{setConfig:n,resultConfig:S}),S.dynamicUrlTemplate&&b(S.dynamicUrlTemplate),"main"===S.adBlockMode&&u(),I.cmd.push=function(n){if("function"==typeof n)try{n.call()}catch(n){d("Error processing command",n)}else d("Commands written into rom.cmd must be wrapped in a function")},I.cmd.forEach(function(n){return I.cmd.push(n)}),I.inited=!0,I.dispatch({event:T.RUN,config:S}))}function o(){return navigator.language||navigator.userLanguage?navigator.language.slice(0,2).toLowerCase():"no"}function t(n){var o=document.createElement("script");o.type="text/javascript",o.async=!0,o.src=n;var t=document.getElementsByTagName("head")[0];t.insertBefore(o,t.firstChild)}function e(){M=!!localStorage.getItem("roxot.debug.errorLogger")}function r(n,o){M&&console.error(n,o)}function i(n,o){M&&console.warn(n,o)}function a(){k=!!localStorage.getItem("rom.debug.consoleDebug"),e()}function c(n,o){if(k){var t=l(n);o=o||{},console.log(t,o)}}function d(n,o){var t=l(n);o=o||{},r(t,o),k&&console.error(t,o)}function s(n,o){var t=l(n);o=o||{},i(n,o),k&&console.warn(t,o)}function l(n){var o=new Date,t=[o.getHours(),o.getMinutes(),o.getSeconds()].join(":");return(t+="."+o.getMilliseconds())+": RoxotManager ("+E+"): "+n}function u(){if(!z.isLoaded&&!z.inited){t(localStorage.getItem("rom.rowr_url")||"https://cdn-plus.roxot-panel.com/roxot-wrapper/js/roxot-wrapper.js"),z.cmd.push(function(){I.cmd.push(function(){z.onAll(function(n){I.dispatch(n)})}),z.setConfig(S.wrapperConfig)}),z.isLoaded=!0,c("Load Roxot Wrapper globally.")}}function f(n,o){var t=localStorage.getItem("rom.ad_tag_url_template")||"https://cdn-plus.roxot-panel.com/wrapper-builder/__TAG_ID__/tag",e=t.replace("__TAG_ID__",o),r=p(o+"_iframe_");g(n,r,'\n<!DOCTYPE html>\n<html style="display: table;">\n  <head></head>\n  <body style="margin: 0;">\n    <div id="'.concat(o,'"></div>\n    <script async src="').concat(e,"\"><\/script>\n    <script>\n        window.rowr = window.rowr || {cmd: []};\n        let rowr = window.rowr;\n        rowr.iframeId = '").concat(r,"';\n        \n        rowr.cmd.push(function() {\n          rowr.setConfig(").concat(JSON.stringify(S.wrapperConfig),");\n          top.rom = top.rom || {cmd: []};\n          top.rom.cmd.push(function () {\n            rowr.onAll(function (data) {\n              top.rom.dispatch(data);\n            });\n          });\n        });\n    <\/script>\n  </body>\n</html>\n  "))}function p(n){return n+Math.floor(1e5*Math.random())}function g(n,o,t){var e=document.createElement("iframe");e.setAttribute("id",o),e.setAttribute("class","rom-iframe"),e.style.border="0",e.style.margin="0",e.style.padding="0",e.style.overflow="hidden",e.style.width="0",e.style.height="0",e.style.display="table";var r=document.getElementById(n);if(!r)return void d("Can not found ad block "+n);r.innerText="",r.appendChild(e);var i=e.contentDocument||e.contentWindow.document;i.open(),i.write(t),i.close()}function m(n,o){var t=localStorage.getItem("rom.ad_tag_url_template")||"https://cdn-plus.roxot-panel.com/wrapper-builder/__TAG_ID__/tag-json",e=t.replace("__TAG_ID__",o);z.cmd.push(function(){z.loadAdConfig(n,e)})}function w(n,o){var t=new XMLHttpRequest;t.open("GET",n),t.responseType="json",t.onload=function(){200!==t.status?d("Error Ajax request to "+n+". Status: "+t.status+": "+t.statusText):o(t.response)},t.onerror=function(){d("Error Ajax request to "+n+". Status: "+t.status+": "+t.statusText)},t.send()}function h(n){return n.hasOwnProperty("tags")?n.tags:y(n.experiments.filter(function(n){return n.hasOwnProperty("chance")&&n.chance>0})).tags}function y(n){if(1===n.length)return n[0];var o=v(n),t=_(o);n=n.slice(0);var e=n.shift();return t<=e.chance?e:y(n)}function v(n){return n.map(function(n){return n.chance}).reduce(function(n,o){return n+o})}function _(n){return 1+Math.floor(Math.random()*n)}function C(n){var o=!1;n.offsetWidth||(o=n.style.width,n.style.width="100%");var t=n.offsetWidth;return!1!==o&&(n.style.width=o),t}function b(n){var o=window.location.hostname;t(n.replace("__HOST__",o))}function x(n,o,t){return n.options=n.options||{},n.options.lazyLoading=n.options.lazyLoading||{},n.options.lazyLoading.hasOwnProperty(o)?n.options.lazyLoading[o]:S.lazyLoading.hasOwnProperty(o)?S.lazyLoading[o]:t}function A(n,o){var t={div:n,config:o,managerConfig:S},e=document.querySelector("#"+n);if(!x(o,"enabled",!1))return!0;var r=x(o,"offset",100),i=window.pageYOffset-r,a=window.pageYOffset+window.innerHeight+r,d=L(e),s=d+e.offsetHeight;return t.windowOffset=r,t.windowTop=i,t.windowBottom=a,t.blockTop=d,t.blockBottom=s,s<i?(c('Roxot Manager: Lazy loading: Ad block "'+n+'" above window on '+(i-s)+"px",t),!1):d>a?(c('Roxot Manager: Lazy loading: Ad block "'+n+'" below window on '+(d-a)+"px",t),!1):(c('Roxot Manager: Lazy loading: Ad block "'+n+'" into window',t),!0)}function L(n){return n?n.offsetTop+L(n.offsetParent):0}var E="1.1.1",T={RUN:"manager_run"};window.rom=window.rom||{cmd:[]};var I=window.rom;window.rowr=window.rowr||{cmd:[]};var z=window.rowr,S={},M=null,k=null,O=[];I.on=function(n){O.push(n)},I.off=function(n){var o=O.indexOf(n);o>-1&&O.splice(o,1)},I.dispatch=function(n){O.slice(0).forEach(function(o){o(n)})},I.display=function(n,o){"iframe"===S.adBlockMode?f(n,o):m(n,o)},I.displayPlacement=function(n,o){var t=localStorage.getItem("rom.ad_tag_url_template")||"https://cdn-plus.roxot-panel.com/wrapper-builder/placement/__PLACEMENT_ID__",e=t.replace("__PLACEMENT_ID__",o);S.isLanguageSpecific&&(e+=-1===e.indexOf("?")?"?":"&",e+="lng="+decodeURIComponent(S.language)),c('Load placement config for "'+n+'"',{div:n,placement:o,url:e,managerConfig:S}),w(e,function(o){I.displayConfig(n,o)})},I.displayConfig=function(n,o){var t={div:n,config:o,managerConfig:S},e=document.querySelector("#"+n);if(!e)return void s('Roxot Manager: Can not found div with id "'+n+'"',t);if(!A(n,o))return void setTimeout(function(){I.displayConfig(n,o)},x(o,"rerunTimeout",1e3));var r=C(e);c('Source element "'+n+'" has size '+r+".",t);var i=o.cases.filter(function(n){return n.size<=r}).sort(function(n,o){return n.size-o.size});if(!i.length)return void s("Not found support sizeCase for "+r+" size of "+n+" block.",t);var a=i.pop();t.sizeCase=a,c("Use sizeCase with size "+a.size+" for "+n+" block.",t);var l=[];if(h(a).forEach(function(n){try{var o=document.createElement("div");o.setAttribute("class","roxotAdContainer"),o.style.textAlign="center",o.style.verticalAlign="top",o.style.width="100%";var r=e.insertAdjacentElement("beforeend",o);for(var i in n.style||{})r.style[i]=n.style[i];for(var a in n.attributes||{})r.setAttribute(a,n.attributes[a]);for(var c in n.data||{})r.dataset[c]=n.data[c];var s=p("roxotAd-"),u=n.classes||[];u.push("roxotAd");var f=document.createElement("div");f.setAttribute("class",u.join(" ")),f.setAttribute("id",s),f.style.display="inline-block",r.appendChild(f),l.push({divId:s,adConfig:n.adConfig,wrapperConfig:n.wrapperConfig||{}})}catch(o){t.tag=n,d("Error in process tag: "+o,t)}}),l.length){if(t.ads=l,"iframe"===S.adBlockMode){c("Run rowr in iframe",t);var u=localStorage.getItem("rom.rowr_url")||"https://cdn-plus.roxot-panel.com/roxot-wrapper/js/roxot-wrapper.js";l.forEach(function(n){var o=p("placement_iframe_"),t='\n<!DOCTYPE html>\n<html style="display: table;">\n  <head></head>\n  <body style="margin: 0;">\n    <div id="'.concat(n.divId,'"></div>\n    <script async src="').concat(u,"\"><\/script>\n    <script>\n        window.rowr = window.rowr || {cmd: []};\n        let rowr = window.rowr;\n        rowr.iframeId = '").concat(o,"';\n        rowr.cmd.push(function() {\n          rowr.setAdConfig('").concat(n.divId,"', ").concat(JSON.stringify(n.adConfig),");\n          rowr.setConfig(").concat(JSON.stringify(S.wrapperConfig),");\n          \n          top.rom = top.rom || {cmd: []};\n          top.rom.cmd.push(function () {\n            rowr.onAll(function (data) {\n              top.rom.dispatch(data);\n            });\n          });\n        });\n    <\/script>\n  </body>\n</html>\n  ");g(n.divId,o,t)})}else c("Run rowr in main",t),z.cmd.push(function(){l.forEach(function(n){z.setAdConfig(n.divId,n.adConfig)})});c("Build "+l.length+" tags and run roxot wrapper for "+n+" block.",t)}},I.version=function(){return E},I.icmd=I.icmd||[],I.icmd.push=function(o){if(o=o||{},I.inited)return void d("Roxot Manager already init.",{romConfig:S,newConfig:o});n(o)},I.icmd.forEach(function(n){return I.icmd.push(n)})}();window.rom = window.rom || {icmd: []}; window.rom.icmd.push({"adBlockMode":"iframe","isLanguageSpecific":false,"dynamicUrlTemplate":"","wrapperConfig":{"prebid":{"adjustment":{"mytarget":0.1,"rtbhouse":0.85,"otm":0.85,"rubicon":0.8,"getintent":0.8}},"adfox":{"hb":{"biddersMap":{"myTarget":"1168310","betweenDigital":"1167588","criteo":"1171975"},"timeout":700}}}});